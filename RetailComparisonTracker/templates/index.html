{% extends 'layout.html' %}

{% block title %}Discord Bot Monitor{% endblock %}

{% block content %}
<div class="container">
    <header class="py-4 text-center">
        <h1 class="display-4">Discord Bot Monitor</h1>
        <p class="lead">Überwachung und Steuerung deines Discord Bots</p>
    </header>

    <div class="row">
        <!-- Status Card -->
        <div class="col-md-6">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-dark text-light">
                    <h5 class="card-title mb-0">Bot Status</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="fw-bold">Status:</span>
                        <div id="bot-status-indicator">
                            <span class="badge bg-secondary">Lädt...</span>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="fw-bold">Uptime:</span>
                        <span id="uptime-display">-</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="fw-bold">Letzter Neustart:</span>
                        <span id="last-restart-display">-</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="fw-bold">Neustarts:</span>
                        <span id="restart-count-display">-</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="fw-bold">Verbundene Server:</span>
                        <span id="guild-count-display">-</span>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span class="fw-bold">Server-Zeit:</span>
                        <span id="server-time-display">-</span>
                    </div>
                </div>
                <div class="card-footer bg-dark p-3">
                    <button id="restart-button" class="btn btn-warning w-100">
                        <i class="fas fa-sync me-2"></i>Bot neustarten
                    </button>
                </div>
            </div>
        </div>

        <!-- Logs Card -->
        <div class="col-md-6">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-dark text-light d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">Bot Logs</h5>
                    <button id="refresh-logs-button" class="btn btn-sm btn-outline-light">
                        <i class="fas fa-sync me-2"></i>Aktualisieren
                    </button>
                </div>
                <div class="card-body p-0">
                    <div class="logs-container">
                        <pre class="logs-pre" id="logs-display">Lädt Logs...</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bot Commands Card -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-dark text-light">
                    <h5 class="card-title mb-0">Bot Befehle</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th scope="col">Befehl</th>
                                    <th scope="col">Beschreibung</th>
                                    <th scope="col">Beispiel</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>!liste</code></td>
                                    <td>Erstellt eine Teilnehmerliste mit Namen, die durch Kommas getrennt sind. Jeder Name bekommt automatisch ein ❌, das durch Reaktionen zu ✅ geändert werden kann.</td>
                                    <td><code>!liste Felix Westfield, Mirella Sterling, John Paul Jones</code></td>
                                </tr>
                                <tr>
                                    <td><code>!ping</code></td>
                                    <td>Prüft, ob der Bot antwortet und zeigt die Latenz an.</td>
                                    <td><code>!ping</code></td>
                                </tr>
                                <tr>
                                    <td><code>!status</code></td>
                                    <td>Zeigt Statusinformationen zum Bot an.</td>
                                    <td><code>!status</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Card -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-dark text-light">
                    <h5 class="card-title mb-0">Besondere Funktionen</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <strong>Namen hinzufügen/entfernen:</strong> Du kannst deine ursprüngliche Nachricht mit dem !liste-Befehl bearbeiten, um Namen hinzuzufügen oder zu entfernen. Der Bot aktualisiert die Liste automatisch.
                        </li>
                        <li class="list-group-item">
                            <strong>Täglicher Neustart:</strong> Der Bot startet jeden Tag um 6:00 Uhr automatisch neu, um die Zuverlässigkeit zu verbessern.
                        </li>
                        <li class="list-group-item">
                            <strong>Automatische Wiederherstellung:</strong> Wenn der Bot abstürzt oder die Verbindung verliert, wird er automatisch neu gestartet.
                        </li>
                        <li class="list-group-item">
                            <strong>Reaktionen:</strong> Teilnehmer können ihren eigenen Status mit den Reaktionen ✅ oder ❌ ändern.
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script src="/static/js/dashboard.js"></script>
{% endblock %}